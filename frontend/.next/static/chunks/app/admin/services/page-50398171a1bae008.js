(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{866:(e,r,a)=>{"use strict";a.d(r,{n:()=>t});let s="http://localhost:4000";function t(e,r={}){let a=function(e){let r=s?s.endsWith("/")?s.slice(0,-1):s:"";if(!r)return e;let a=e.startsWith("/")?e:`/${e}`;return`${r}${a}`}(e),l=r.credentials??"include";return fetch(a,{...r,credentials:l})}},1671:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});var s=a(5155),t=a(8500),l=a.n(t),n=a(2115),d=a(866);function i(){let[e,r]=(0,n.useState)([]),[a,t]=(0,n.useState)(""),[i,o]=(0,n.useState)(0),[c,p]=(0,n.useState)(100),[u,m]=(0,n.useState)(null),[x,b]=(0,n.useState)(""),[h,g]=(0,n.useState)(0),[f,y]=(0,n.useState)(0),[j,v]=(0,n.useState)(null),[N,k]=(0,n.useState)(!1);async function w(){v(null);let e=await (0,d.n)("/api/admin/services"),a=await e.json();if(!e.ok)throw Error(a?.error??"Failed to load");r(a.services??[])}async function S(e){e.preventDefault(),k(!0),v(null);try{let e=await (0,d.n)("/api/admin/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,price:i,businessVolume:c,status:"active"})}),r=await e.json();if(!e.ok)throw Error(r?.error??"Create failed");t(""),o(0),await w()}catch(e){v(e instanceof Error?e.message:String(e))}finally{k(!1)}}async function C(e){k(!0),v(null);try{let r=await (0,d.n)(`/api/admin/services/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"active"===e.status?"inactive":"active"})}),a=await r.json();if(!r.ok)throw Error(a?.error??"Update failed");await w()}catch(e){v(e instanceof Error?e.message:String(e))}finally{k(!1)}}function _(){m(null)}async function E(){if(u){k(!0),v(null);try{let e=await (0,d.n)(`/api/admin/services/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,price:h,businessVolume:f})}),r=await e.json();if(!e.ok)throw Error(r?.error??"Update failed");m(null),await w()}catch(e){v(e instanceof Error?e.message:String(e))}finally{k(!1)}}}return(0,n.useEffect)(()=>{w().catch(e=>v(String(e?.message??e)))},[]),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-purple-900/20 dark:to-indigo-900/20 p-6",children:(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-2xl",children:"⚙️"}),(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Panel"})]}),(0,s.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 ml-15",children:"Manage services and their Business Volume"})]}),(0,s.jsxs)("div",{className:"flex gap-3 animate-slide-in",children:[(0,s.jsx)(l(),{className:"glass-panel rounded-xl px-5 py-2.5 text-sm font-medium transition-all hover:scale-105 hover:shadow-lg border border-purple-200 dark:border-purple-500/30",href:"/admin/rules",children:"Rules"}),(0,s.jsx)(l(),{className:"glass-panel rounded-xl px-5 py-2.5 text-sm font-medium transition-all hover:scale-105 hover:shadow-lg border border-purple-200 dark:border-purple-500/30",href:"/dashboard",children:"Dashboard"})]})]}),j?(0,s.jsxs)("div",{className:"mb-6 glass-panel animate-shake rounded-xl border border-red-500/30 bg-red-500/10 p-4 text-sm text-red-700 dark:text-red-300",children:["⚠️ ",j]}):null,(0,s.jsxs)("form",{className:"glass-panel animate-fade-in rounded-2xl border border-purple-200 dark:border-purple-500/30 p-6 mb-6",onSubmit:S,style:{animationDelay:"0.1s"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white text-xl",children:"➕"}),(0,s.jsx)("h2",{className:"font-bold text-xl",children:"Create New Service"})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsx)("input",{className:"glass-panel md:col-span-2 rounded-xl border border-purple-200 dark:border-purple-500/30 px-4 py-3 font-medium transition-all focus:ring-2 focus:ring-purple-500",placeholder:"Service name",value:a,onChange:e=>t(e.target.value),required:!0}),(0,s.jsx)("input",{className:"glass-panel rounded-xl border border-purple-200 dark:border-purple-500/30 px-4 py-3 font-medium transition-all focus:ring-2 focus:ring-purple-500",type:"number",value:i,onChange:e=>o(Number(e.target.value)),min:0,step:"0.01",placeholder:"Price ($)",required:!0}),(0,s.jsx)("input",{className:"glass-panel rounded-xl border border-purple-200 dark:border-purple-500/30 px-4 py-3 font-medium transition-all focus:ring-2 focus:ring-purple-500",type:"number",value:c,onChange:e=>p(Number(e.target.value)),min:0,placeholder:"BV",required:!0})]}),(0,s.jsx)("button",{className:"mt-4 rounded-xl bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-3 text-sm font-semibold text-white transition-all hover:scale-105 hover:shadow-xl disabled:opacity-60 disabled:hover:scale-100",disabled:N,type:"submit",children:N?"Creating...":"Create Service"})]}),(0,s.jsxs)("div",{className:"glass-panel animate-fade-in rounded-2xl border border-purple-200 dark:border-purple-500/30 p-6",style:{animationDelay:"0.2s"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white text-xl",children:"\uD83D\uDCCB"}),(0,s.jsx)("h2",{className:"font-bold text-xl",children:"All Services"})]}),(0,s.jsx)("div",{className:"overflow-auto rounded-xl border border-purple-200 dark:border-purple-500/30",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-purple-500/10 to-blue-500/10 text-left text-zinc-700 dark:text-zinc-300",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 font-semibold",children:"Name"}),(0,s.jsx)("th",{className:"py-3 px-4 font-semibold",children:"Price"}),(0,s.jsx)("th",{className:"py-3 px-4 font-semibold",children:"BV"}),(0,s.jsx)("th",{className:"py-3 px-4 font-semibold",children:"Status"}),(0,s.jsx)("th",{className:"py-3 px-4 font-semibold text-right",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[e.map(e=>(0,s.jsxs)("tr",{className:"border-t border-purple-200 dark:border-purple-500/30 hover:bg-purple-500/5 transition-colors",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:u===e._id?(0,s.jsx)("input",{className:"w-full glass-panel rounded-lg border border-purple-200 dark:border-purple-500/30 px-3 py-2 font-medium",value:x,onChange:e=>b(e.target.value)}):(0,s.jsx)("span",{className:"font-medium",children:e.name})}),(0,s.jsx)("td",{className:"py-3 px-4",children:u===e._id?(0,s.jsx)("input",{className:"w-full glass-panel rounded-lg border border-purple-200 dark:border-purple-500/30 px-3 py-2 font-medium",type:"number",step:"0.01",min:0,value:h,onChange:e=>g(Number(e.target.value))}):(0,s.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["$",e.price]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:u===e._id?(0,s.jsx)("input",{className:"w-full glass-panel rounded-lg border border-purple-200 dark:border-purple-500/30 px-3 py-2 font-medium",type:"number",min:0,value:f,onChange:e=>y(Number(e.target.value))}):(0,s.jsx)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:e.businessVolume})}),(0,s.jsx)("td",{className:"py-3 px-4",children:"active"===e.status?(0,s.jsx)("span",{className:"px-2 py-1 rounded-lg bg-green-500/10 text-green-700 dark:text-green-300 text-xs font-semibold",children:"Active"}):(0,s.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-500/10 text-gray-700 dark:text-gray-300 text-xs font-semibold",children:"Inactive"})}),(0,s.jsx)("td",{className:"py-3 px-4 text-right",children:(0,s.jsx)("div",{className:"flex justify-end gap-2",children:u===e._id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"glass-panel rounded-lg px-3 py-1.5 text-xs font-medium disabled:opacity-60 border border-green-200 dark:border-green-500/30 hover:bg-green-500/10 transition-colors",onClick:E,disabled:N,children:"✓ Save"}),(0,s.jsx)("button",{className:"glass-panel rounded-lg px-3 py-1.5 text-xs font-medium disabled:opacity-60 border border-red-200 dark:border-red-500/30 hover:bg-red-500/10 transition-colors",onClick:_,disabled:N,children:"✕ Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"glass-panel rounded-lg px-3 py-1.5 text-xs font-medium disabled:opacity-60 border border-blue-200 dark:border-blue-500/30 hover:bg-blue-500/10 transition-colors",onClick:()=>{m(e._id),b(e.name),g(e.price),y(e.businessVolume)},disabled:N,children:"✏️ Edit"}),(0,s.jsx)("button",{className:"glass-panel rounded-lg px-3 py-1.5 text-xs font-medium disabled:opacity-60 border border-purple-200 dark:border-purple-500/30 hover:bg-purple-500/10 transition-colors",onClick:()=>C(e),disabled:N,children:"\uD83D\uDD04 Toggle"})]})})})]},e._id)),0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-8 text-center text-zinc-600 dark:text-zinc-400",colSpan:5,children:"No services yet. Create your first service above!"})}):null]})]})})]})]})})}},5292:(e,r,a)=>{Promise.resolve().then(a.bind(a,1671))}},e=>{e.O(0,[500,441,794,358],()=>e(e.s=5292)),_N_E=e.O()}]);